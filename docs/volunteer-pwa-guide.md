# CIRS Satellite PWA 志工安裝指南

本指南說明如何在手機上安裝 CIRS Satellite App，讓志工可以在現場進行報到、物資領取等操作。

---

## 系統需求

- **iOS**: Safari 瀏覽器（iOS 11.3 以上）
- **Android**: Chrome 瀏覽器（Android 5.0 以上）
- 相機權限為可選（有手動輸入備用方案）

---

## iPhone / iPad 安裝步驟

### 步驟 1：開啟 Safari 瀏覽器

> ⚠️ **重要**：必須使用 Safari，其他瀏覽器（Chrome、Firefox）無法安裝 PWA

![Safari Icon](https://help.apple.com/assets/65E1B4E5680E3F7A730AEE02/65E1B4F6EB8FE24A2D0D9E7A/zh_TW/d1fd13d4f7433ce71cc1a33b0e62a202.png)

### 步驟 2：前往 CIRS Satellite 網址

在網址列輸入管理員提供的網址，例如：
```
https://your-hub-address.com/mobile/
```

### 步驟 3：點擊分享按鈕

點擊畫面下方的 **分享按鈕**（方框加向上箭頭的圖示）

```
    ┌─────────────────────┐
    │                     │
    │    CIRS Satellite   │
    │                     │
    │                     │
    └─────────────────────┘
           ↑
         [⬆️] ← 點擊這個
```

### 步驟 4：選擇「加入主畫面」

向下滑動找到 **「加入主畫面」** 選項，點擊它

```
    ┌─────────────────────┐
    │ 拷貝                │
    │ 加入閱讀列表         │
    │ 加入書籤            │
    │ ➕ 加入主畫面  ← 點這個
    │ ...                 │
    └─────────────────────┘
```

### 步驟 5：確認安裝

1. 可以修改 App 名稱（建議保留預設名稱）
2. 點擊右上角的 **「新增」**

### 步驟 6：完成！

App 圖示會出現在主畫面，點擊即可開啟

---

## Android 手機安裝步驟

### 步驟 1：開啟 Chrome 瀏覽器

![Chrome Icon](https://www.google.com/chrome/static/images/chrome-logo-m100.svg)

### 步驟 2：前往 CIRS Satellite 網址

在網址列輸入管理員提供的網址，例如：
```
https://your-hub-address.com/mobile/
```

### 步驟 3：等待安裝提示

Chrome 會自動顯示 **「新增至主畫面」** 的橫幅提示

```
    ┌─────────────────────────────┐
    │ ➕ 新增至主畫面              │
    └─────────────────────────────┘
```

點擊該提示即可安裝

### 步驟 3（替代方案）：手動安裝

如果沒有看到提示，請：

1. 點擊右上角的 **選單按鈕**（三個點 ⋮）
2. 選擇 **「新增至主畫面」** 或 **「安裝應用程式」**
3. 確認安裝

### 步驟 4：完成！

App 圖示會出現在主畫面，點擊即可開啟

---

## 首次使用設定（v1.3）

### 連接到 Hub（收容所管理站）

**方法一：掃描 QR Code + 輸入配對碼**

1. 使用手機相機掃描管理員螢幕上的 **QR Code**
2. 自動開啟 CIRS Satellite 網頁
3. 畫面會顯示 **6 位數字輸入框**
4. 請管理員告知螢幕上的 **6 位數配對碼**（例如：847291）
5. 輸入配對碼後自動連接

```
    ┌─────────────────────┐
    │   輸入配對碼         │
    │                     │
    │   ┌─┬─┬─┬─┬─┬─┐     │
    │   │8│4│7│2│9│1│     │
    │   └─┴─┴─┴─┴─┴─┘     │
    │                     │
    │   [    配對    ]     │
    └─────────────────────┘
```

> 💡 **提示**：配對碼每 5 分鐘自動更新，如過期請請管理員刷新

**方法二：直接輸入網址（已安裝 App 時）**

1. 開啟已安裝的 CIRS Satellite App
2. 輸入管理員提供的 6 位數配對碼
3. 點擊「配對」完成連接

### 選擇身分

配對成功後，系統會詢問您的身分：

- **志工**：報到登記、物資發放
- **管理員**：所有功能 + 統計報表

選擇後點擊「確認」即可開始使用

---

## 功能說明

### 📋 報到/退場

點擊「報到/退場」按鈕後，可選擇：

1. **掃描 QR Code**：使用相機掃描人員識別證
2. **手動輸入 ID**：直接輸入人員 ID 或姓名（相機無法使用時的備用方案）

選擇「報到」或「退場」後送出即可

### 📦 領取物資

點擊「領取物資」按鈕後，可選擇：

1. **掃描 QR Code**：使用相機掃描
2. **手動選擇**：
   - 輸入領取人 ID
   - 從下拉選單選擇物資（資料來自庫存快取）
   - 調整發放數量
   - 點擊「確認發放」

> 💡 **提示**：如物資選單是空的，請先到「查看庫存」載入庫存資料

### 📊 查看庫存
查看目前收容所的物資庫存狀況（支援離線瀏覽）

### 🔄 同步資料
當網路恢復時，自動同步離線期間的操作記錄

---

## 離線模式

CIRS Satellite 支援離線操作：

- 📡 **離線指示**：畫面上方會顯示「離線模式」提示
- ⏳ **待同步計數**：右上角顯示待同步的操作數量
- 🔄 **自動同步**：網路恢復後自動同步資料
- 👆 **手動同步**：也可點擊「立即同步」手動觸發

---

## 常見問題

### Q: 為什麼 iPhone 上無法安裝？
A: 請確認使用 Safari 瀏覽器，其他瀏覽器（Chrome、Firefox）不支援 iOS 的 PWA 安裝。

### Q: 安裝後找不到 App？
A: 請在主畫面左右滑動尋找，或使用 Spotlight 搜尋「CIRS」。

### Q: 掃描 QR Code 時相機沒反應？
A: v1.3 新增了「手動輸入」備用方案，即使相機無法使用也能完成操作：
- 報到/退場：可手動輸入人員 ID
- 物資發放：可手動選擇領取人與物資

如仍需使用相機，請檢查權限設定：
- iPhone: 設定 → Safari → 相機 → 允許
- Android: 設定 → 應用程式 → Chrome → 權限 → 相機 → 允許

### Q: 離線操作的資料會遺失嗎？
A: 不會。所有操作都會儲存在手機中，網路恢復後自動同步。

### Q: 如何更新 App？
A: PWA 會自動更新。如需強制更新，請：
1. 關閉 App
2. 用瀏覽器重新開啟網址
3. 等待幾秒後關閉
4. 重新開啟 App

### Q: 如何解除 Hub 連接？
A: 點擊右上角設定圖示 ⚙️ → 「中斷連接」

---

## 需要協助？

如有任何問題，請聯繫：
- 現場管理員
- 系統管理員

---

*CIRS Satellite v1.3.1 - 更新日期: 2025-12-18*
